---
apiVersion: v1
kind: Pod
metadata:
  name: disk-wipe-talos1
  namespace: kube-system
spec:
  restartPolicy: Never
  nodeName: talos1
  containers:
    - name: disk-wipe
      image: ubuntu
      securityContext:
        privileged: true
      command: ["/bin/sh", "-c"]
      args:
        [
          "apt update; apt install fdisk gdisk parted udev -y; sgdisk --zap-all /dev/sdb; dd if=/dev/zero bs=1000M count=1000000 oflag=direct,dsync of=/dev/sdb; wipefs -af /dev/sdb; blkdiscard /dev/sdb; partprobe /dev/sdb",
        ]
  nodeSelector:
    kubernetes.io/hostname: talos1
---
apiVersion: v1
kind: Pod
metadata:
  name: disk-wipe-talos2-sdb
  namespace: kube-system
spec:
  restartPolicy: Never
  nodeName: talos2
  containers:
    - name: disk-wipe
      image: ubuntu
      securityContext:
        privileged: true
      command: ["/bin/sh", "-c"]
      args:
        [
          "apt update; apt install fdisk gdisk parted udev -y; sgdisk --zap-all /dev/sdb; dd if=/dev/zero bs=1000M count=1000000 oflag=direct,dsync of=/dev/sdb; wipefs -af /dev/sdb; blkdiscard /dev/sdb; partprobe /dev/sdb",
        ]
  nodeSelector:
    kubernetes.io/hostname: talos2
---
apiVersion: v1
kind: Pod
metadata:
  name: disk-wipe-talos2-sdc
  namespace: kube-system
spec:
  restartPolicy: Never
  nodeName: talos2
  containers:
    - name: disk-wipe
      image: ubuntu
      securityContext:
        privileged: true
      command: ["/bin/sh", "-c"]
      args:
        [
          "apt update; apt install fdisk gdisk parted udev -y; sgdisk --zap-all /dev/sdb; dd if=/dev/zero bs=1000M count=1000000 oflag=direct,dsync of=/dev/sdb; wipefs -af /dev/sdb; blkdiscard /dev/sdb; partprobe /dev/sdb",
        ]
  nodeSelector:
    kubernetes.io/hostname: talos2
---
apiVersion: v1
kind: Pod
metadata:
  name: disk-wipe-talos3-sdb
  namespace: kube-system
spec:
  restartPolicy: Never
  nodeName: talos2
  containers:
    - name: disk-wipe
      image: ubuntu
      securityContext:
        privileged: true
      command: ["/bin/sh", "-c"]
      args:
        [
          "apt update; apt install fdisk gdisk parted udev -y; sgdisk --zap-all /dev/sdb; dd if=/dev/zero bs=1000M count=1000000 oflag=direct,dsync of=/dev/sdb; wipefs -af /dev/sdb; blkdiscard /dev/sdb; partprobe /dev/sdb",
        ]
  nodeSelector:
    kubernetes.io/hostname: talos3
---
apiVersion: v1
kind: Pod
metadata:
  name: disk-wipe-talos3-sdb
  namespace: kube-system
spec:
  restartPolicy: Never
  nodeName: talos3
  containers:
    - name: disk-wipe
      image: ubuntu
      securityContext:
        privileged: true
      command: ["/bin/sh", "-c"]
      args:
        [
          "apt update; apt install fdisk gdisk parted udev -y; sgdisk --zap-all /dev/sdb; dd if=/dev/zero bs=1000M count=1000000 oflag=direct,dsync of=/dev/sdb; wipefs -af /dev/sdb; blkdiscard /dev/sdb; partprobe /dev/sdb",
        ]
  nodeSelector:
    kubernetes.io/hostname: talos3
---
apiVersion: v1
kind: Pod
metadata:
  name: disk-wipe-talos4-sdb
  namespace: kube-system
spec:
  restartPolicy: Never
  nodeName: talos4
  containers:
    - name: disk-wipe
      image: ubuntu
      securityContext:
        privileged: true
      command: ["/bin/sh", "-c"]
      args:
        [
          "apt update; apt install fdisk gdisk parted udev -y; sgdisk --zap-all /dev/sdb; dd if=/dev/zero bs=1000M count=1000000 oflag=direct,dsync of=/dev/sdb; wipefs -af /dev/sdb; blkdiscard /dev/sdb; partprobe /dev/sdb",
        ]
  nodeSelector:
    kubernetes.io/hostname: talos4
