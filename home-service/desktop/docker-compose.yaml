version: "3"

services:
  node-exporter:
    image: quay.io/prom/node-exporter:v1.3.0
    restart: always
    ports:
      - "9100:9100"
    environment:
      - PROMETHEUS_CLIENT_URL=http://opentelemetry-collector:55678
    depends_on:
      - opentelemetry-collector

  opentelemetry-collector:
    image: otel/opentelemetry-collector:v1.3.0
    restart: always
    command: --config /etc/otelcollector/config.yml
    ports:
      - "55678:55678"
    environment:
      - PROMETHEUS_ENDPOINT=http://localhost:9090
